<Window
    Width="1050"
    Height="650"
    mc:Ignorable="d"
    x:Name="Window"
    Icon="Logo.ico"
    Title="Новый файл – Notepad"
    x:Class="Notepad.MainWindow"
    WindowStartupLocation="CenterScreen"
    Closing="Window_Closing"
    PreviewKeyDown="Window_PreviewKeyDown"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006">

    <Window.Resources>

        <Style x:Key="StyleMenuItem">
            <Setter Property="Control.Margin" Value="1" />
            <Setter Property="Control.Padding" Value="5" />
            <Setter Property="Control.BorderThickness" Value="0" />
        </Style>

        <Style x:Key="StyleButtonToolBar">
            <Setter Property="Control.Width" Value="37" />
            <Setter Property="Control.Padding" Value="7" />
            <Setter Property="Control.BorderThickness" Value="0" />
        </Style>

        <Style x:Key="StyleBorder">
            <Setter Property="Control.Background" Value="#EEE" />
            <Setter Property="Control.BorderBrush" Value="#AAA" />
            <Setter Property="Control.BorderThickness" Value="0, 1, 0, 0" />
        </Style>

        <Style x:Key="StyleTextBoxFind">
            <Setter Property="Control.Width" Value="175" />
            <Setter Property="Control.Padding" Value="5" />
        </Style>

        <Style x:Key="StyleButtonFind">
            <Setter Property="Control.Width" Value="135" />
            <Setter Property="Control.Padding" Value="5" />
        </Style>

        <Style x:Key="StyleStatusBarItem">
            <Setter Property="Control.Padding" Value="5" />
        </Style>

        <Style x:Key="StyleLabelStatusBar">
            <Setter Property="Control.Padding" Value="0" />
            <Setter Property="Control.VerticalContentAlignment" Value="Center" />
        </Style>

        <Style x:Key="StyleSeparator">
            <Setter Property="Control.Background" Value="#BBB" />
        </Style>

        <ItemsPanelTemplate x:Key="Items">
            <StackPanel Background="#F2F2F2" />
        </ItemsPanelTemplate>

    </Window.Resources>

    <DockPanel>

        <Menu
            DockPanel.Dock="Top"
            Background="#FFF"
            BorderBrush="#EEE"
            BorderThickness="0, 0, 0, 1">

            <MenuItem
                Header="Файл"
                Padding="7, 3, 7, 3"
                BorderThickness="0">

                <MenuItem.Style>
                    
                    <Style TargetType="{x:Type MenuItem}">
                        
                        <Setter
                            Property="ItemsPanel"
                            Value="{StaticResource Items}" />
                        
                    </Style>
                    
                </MenuItem.Style>

                <MenuItem
                    Header="Создать"
                    InputGestureText="Ctrl+N"
                    Click="CreateFile_Click"
                    Style="{StaticResource StyleMenuItem}" />

                <MenuItem
                    Header="Открыть..."
                    InputGestureText="Ctrl+O"
                    Click="OpenFile_Click"
                    Style="{StaticResource StyleMenuItem}" />

                <MenuItem
                    Header="Сохранить"
                    InputGestureText="Ctrl+S"
                    Click="SaveFile_Click"
                    Style="{StaticResource StyleMenuItem}" />

                <MenuItem
                    Header="Сохранить как..."
                    InputGestureText="Ctrl+Shift+S"
                    Click="SaveFileAs_Click"
                    Style="{StaticResource StyleMenuItem}" />

                <Separator />

                <MenuItem
                    Header="Скопировать имя"
                    Click="CopyPath_Click"
                    Style="{StaticResource StyleMenuItem}" />

                <MenuItem
                    Header="Скопировать путь"
                    Click="CopyFullPath_Click"
                    Style="{StaticResource StyleMenuItem}" />

                <Separator />

                <MenuItem
                    Header="О файле..."
                    InputGestureText="Ctrl+Shift+F"
                    Click="FileInfo_Click"
                    Style="{StaticResource StyleMenuItem}" />

            </MenuItem>

            <MenuItem
                Header="Правка"
                BorderThickness="0"
                ItemsPanel="{StaticResource Items}">

                <MenuItem
                    Header="Копировать"
                    InputGestureText="Ctrl+C"
                    Click="Copy_Click"
                    Style="{StaticResource StyleMenuItem}" />

                <MenuItem
                    Header="Вставить"
                    InputGestureText="Ctrl+V"
                    Click="Paste_Click"
                    Style="{StaticResource StyleMenuItem}" />

                <MenuItem
                    Header="Вырезать"
                    InputGestureText="Ctrl+X"
                    Click="Cut_Click"
                    Style="{StaticResource StyleMenuItem}" />

                <MenuItem
                    Header="Выделить всё"
                    InputGestureText="Ctrl+A"
                    Click="SelectAll_Click"
                    Style="{StaticResource StyleMenuItem}" />

                <MenuItem
                    Header="Удалить"
                    InputGestureText="Delete"
                    Click="Delete_Click"
                    Style="{StaticResource StyleMenuItem}" />

                <Separator />

                <MenuItem
                    Header="Поиск"
                    InputGestureText="Ctrl+F"
                    Click="Find_Click"
                    Style="{StaticResource StyleMenuItem}" />

                <MenuItem
                    Header="Перейти..."
                    InputGestureText="Ctrl+G"
                    Click="GoToLine_Click"
                    Style="{StaticResource StyleMenuItem}" />

                <Separator />

                <MenuItem
                    Header="Переместиться в начало"
                    InputGestureText="Ctrl+Стрелка вверх"
                    Click="StartScroll_Click"
                    Style="{StaticResource StyleMenuItem}" />

                <MenuItem
                    Header="Переместиться в конец"
                    InputGestureText="Ctrl+Стрелка вниз"
                    Click="EndScroll_Click"
                    Style="{StaticResource StyleMenuItem}" />

                <Separator />

                <MenuItem
                    Header="Текущая дата"
                    Click="CurrentDate_Click"
                    Style="{StaticResource StyleMenuItem}" />

                <Separator />

                <MenuItem
                    Header="Отменить"
                    InputGestureText="Ctrl+Z"
                    Click="Undo_Click"
                    Style="{StaticResource StyleMenuItem}" />

                <MenuItem
                    Header="Вернуть"
                    InputGestureText="Ctrl+Y"
                    Click="Redo_Click"
                    Style="{StaticResource StyleMenuItem}" />

            </MenuItem>

            <MenuItem
                Header="Формат"
                BorderThickness="0"
                ItemsPanel="{StaticResource Items}">

                <MenuItem
                    Header="Настройки..."
                    Click="Settings_Click"
                    Style="{StaticResource StyleMenuItem}" />

                <Separator />

                <MenuItem
                    Header="Заменить табуляцию"
                    InputGestureText="Ctrl+K"
                    Click="ReplaceTab_Click"
                    Style="{StaticResource StyleMenuItem}" />

            </MenuItem>

            <MenuItem
                Header="Вид"
                BorderThickness="0"
                ItemsPanel="{StaticResource Items}">

                <MenuItem
                    Header="Увеличить"
                    InputGestureText="Ctrl+Плюс"
                    Click="IncreaseFontSize_Click"
                    Style="{StaticResource StyleMenuItem}" />

                <MenuItem
                    Header="Уменьшить"
                    InputGestureText="Ctrl+Минус"
                    Click="DecreaseFontSize_Click"
                    Style="{StaticResource StyleMenuItem}" />

                <MenuItem
                    Header="Восстановить размер шрифта"
                    InputGestureText="Ctrl+0"
                    Click="InitializeFontSize_Click"
                    Style="{StaticResource StyleMenuItem}" />

            </MenuItem>

            <MenuItem
                Header="Справка"
                BorderThickness="0"
                ItemsPanel="{StaticResource Items}">

                <MenuItem
                    Header="О программе..."
                    Click="Program_Click"
                    Style="{StaticResource StyleMenuItem}" />

            </MenuItem>

        </Menu>

        <ToolBar
            x:Name="ToolBar"
            DockPanel.Dock="Top"
            Background="#FFF"
            BorderBrush="#EEE"
            BorderThickness="1, 0, 1, 1">

            <Button
                ToolTip="Создать (Ctrl+N)"
                Click="CreateFile_Click"
                Style="{StaticResource StyleButtonToolBar}">
                <Image Source="Icons/Create.png" />
            </Button>

            <Button
                ToolTip="Открыть... (Ctrl+O)"
                Click="OpenFile_Click"
                Style="{StaticResource StyleButtonToolBar}">
                <Image Source="Icons/Open.png" />
            </Button>

            <Button
                ToolTip="Сохранить (Ctrl+S)"
                Click="SaveFile_Click"
                Style="{StaticResource StyleButtonToolBar}">
                <Image Source="Icons/Save.png" />
            </Button>

            <Button
                ToolTip="Сохранить как... (Ctrl+Shift+S)"
                Click="SaveFileAs_Click"
                Style="{StaticResource StyleButtonToolBar}">
                <Image Source="Icons/SaveAs.png" />
            </Button>

            <Separator />

            <Button
                ToolTip="Копировать (Ctrl+C)"
                Click="Copy_Click"
                Style="{StaticResource StyleButtonToolBar}">
                <Image Source="Icons/Copy.png" />
            </Button>

            <Button
                ToolTip="Вставить (Ctrl+V)"
                Click="Paste_Click"
                Style="{StaticResource StyleButtonToolBar}">
                <Image Source="Icons/Paste.png" />
            </Button>

            <Button
                ToolTip="Вырезать (Ctrl+X)"
                Click="Cut_Click"
                Style="{StaticResource StyleButtonToolBar}">
                <Image Source="Icons/Cut.png" />
            </Button>

            <Button
                ToolTip="Выделить всё (Ctrl+A)"
                Click="SelectAll_Click"
                Style="{StaticResource StyleButtonToolBar}">
                <Image Source="Icons/SelectAll.png" />
            </Button>

            <Button
                ToolTip="Удалить (Delete)"
                Click="Delete_Click"
                Style="{StaticResource StyleButtonToolBar}">
                <Image Source="Icons/Cross.png" />
            </Button>

            <Separator />

            <Button
                ToolTip="Отменить (Ctrl+Z)"
                Click="Undo_Click"
                Style="{StaticResource StyleButtonToolBar}">
                <Image Source="Icons/Undo.png" />
            </Button>

            <Button
                ToolTip="Вернуть (Ctrl+Y)"
                Click="Redo_Click"
                Style="{StaticResource StyleButtonToolBar}">
                <Image Source="Icons/Redo.png" />
            </Button>

            <Separator />

            <Button
                ToolTip="Поиск (Ctrl+F)"
                Click="Find_Click"
                Style="{StaticResource StyleButtonToolBar}">
                <Image Source="Icons/Find.png" />
            </Button>

            <Button
                ToolTip="Настройки..."
                Click="Settings_Click"
                Style="{StaticResource StyleButtonToolBar}">
                <Image Source="Icons/Settings.png" />
            </Button>

            <Separator />

            <Button
                ToolTip="Увеличить (Ctrl+Плюс)"
                Click="IncreaseFontSize_Click"
                Style="{StaticResource StyleButtonToolBar}">
                <Image Source="Icons/Increase.png" />
            </Button>

            <Button
                ToolTip="Уменьшить (Ctrl+Минус)"
                Click="DecreaseFontSize_Click"
                Style="{StaticResource StyleButtonToolBar}">
                <Image Source="Icons/Decrease.png" />
            </Button>

            <Button
                ToolTip="Восстановить размер шрифта (Ctrl+0)"
                Click="InitializeFontSize_Click"
                Style="{StaticResource StyleButtonToolBar}">
                <Image Source="Icons/CheckMark.png" />
            </Button>

        </ToolBar>

        <ScrollViewer
            DockPanel.Dock="Bottom"
            HorizontalScrollBarVisibility="Auto"
            VerticalScrollBarVisibility="Disabled">

            <StatusBar
                Padding="4"
                Style="{StaticResource StyleBorder}">

                <StatusBarItem Style="{StaticResource StyleStatusBarItem}">
                    
                    <TextBlock>
                        
                        <Label
                            Content="Масштаб: "
                            Style="{StaticResource StyleLabelStatusBar}" />
                        
                        <Label
                            x:Name="Count"
                            Content="100%"
                            Style="{StaticResource StyleLabelStatusBar}" />
                        
                    </TextBlock>
                    
                </StatusBarItem>

                <Separator Style="{StaticResource StyleSeparator}" />

                <StatusBarItem Style="{StaticResource StyleStatusBarItem}">
                    
                    <TextBlock>
                        
                        <Label
                            Content="Строка: "
                            Style="{StaticResource StyleLabelStatusBar}" />
                        
                        <Label
                            x:Name="CountRows"
                            Content="1"
                            Style="{StaticResource StyleLabelStatusBar}" />
                        
                    </TextBlock>
                    
                </StatusBarItem>

                <Separator Style="{StaticResource StyleSeparator}" />

                <StatusBarItem Style="{StaticResource StyleStatusBarItem}">
                    
                    <TextBlock>
                        
                        <Label
                            Content="Столбец: "
                            Style="{StaticResource StyleLabelStatusBar}" />
                        
                        <Label
                            x:Name="CountColumns"
                            Content="1"
                            Style="{StaticResource StyleLabelStatusBar}" />
                        
                    </TextBlock>
                    
                </StatusBarItem>

                <Separator Style="{StaticResource StyleSeparator}" />

                <StatusBarItem Style="{StaticResource StyleStatusBarItem}">
                    
                    <TextBlock>
                        
                        <Label
                            Content="Количество строк: "
                            Style="{StaticResource StyleLabelStatusBar}" />
                        
                        <Label
                            x:Name="CountLines"
                            Content="1"
                            Style="{StaticResource StyleLabelStatusBar}" />
                        
                    </TextBlock>
                    
                </StatusBarItem>

                <Separator Style="{StaticResource StyleSeparator}" />

                <StatusBarItem Style="{StaticResource StyleStatusBarItem}">
                    
                    <TextBlock>
                        
                        <Label
                            Content="Количество символов: "
                            Style="{StaticResource StyleLabelStatusBar}" />
                        
                        <Label
                            x:Name="CountChars"
                            Content="0 / 1 000 000"
                            Style="{StaticResource StyleLabelStatusBar}" />
                        
                    </TextBlock>
                    
                </StatusBarItem>

            </StatusBar>

        </ScrollViewer>

        <ScrollViewer
            x:Name="PanelFind"
            Visibility="Collapsed"
            DockPanel.Dock="Bottom"
            HorizontalScrollBarVisibility="Auto"
            VerticalScrollBarVisibility="Disabled">

            <Border
                Padding="10"
                Style="{StaticResource StyleBorder}">

                <DockPanel>

                    <StackPanel
                        Margin="0, 0, 15, 0"
                        Orientation="Vertical"
                        VerticalAlignment="Center">

                        <CheckBox
                            x:Name="IsRegister"
                            Click="FindCheckedChanged_Click"
                            Content="Учитывать регистр" />

                        <CheckBox
                            x:Name="IsCountMatches"
                            Margin="0, 10, 0, 0"
                            Click="FindCheckedChanged_Click"
                            Content="Количество замен" />

                        <CheckBox
                            x:Name="IsRegularExpression"
                            Margin="0, 10, 0, 0"
                            Click="FindCheckedChanged_Click"
                            Content="Регулярное выражение" />

                        <Label
                            x:Name="Info"
                            Margin="0 10, 0, 0"
                            Foreground="#090"
                            Visibility="Collapsed" />

                        <Label
                            x:Name="PositionMatch"
                            Foreground="#090"
                            Visibility="Collapsed" />

                    </StackPanel>

                    <StackPanel
                        Margin="0, 0, 15, 0"
                        Orientation="Vertical"
                        VerticalAlignment="Center">

                        <StackPanel
                            Orientation="Horizontal"
                            HorizontalAlignment="Right">

                            <Label Content="Найти:" />

                            <TextBox
                                x:Name="SearchFind"
                                Style="{StaticResource StyleTextBoxFind}" />

                        </StackPanel>

                        <StackPanel
                            Margin="0, 10, 0, 0"
                            Orientation="Horizontal"
                            HorizontalAlignment="Right">

                            <Label Content="Заменить на:" />

                            <TextBox
                                x:Name="SearchReplace"
                                Style="{StaticResource StyleTextBoxFind}" />

                        </StackPanel>

                    </StackPanel>

                    <StackPanel
                        Orientation="Vertical"
                        VerticalAlignment="Center">

                        <Button
                            x:Name="Find"
                            Content="Найти далее"
                            Click="ButtonFind_Click"
                            Style="{StaticResource StyleButtonFind}" />

                        <Button
                            x:Name="Replace"
                            Margin="0, 10, 0, 0"
                            Content="Заменить (с начала)"
                            Click="ButtonFind_Click"
                            Style="{StaticResource StyleButtonFind}" />

                        <Button
                            x:Name="ReplaceAll"
                            Margin="0, 10, 0, 0"
                            Content="Заменить всё"
                            Click="ButtonFind_Click"
                            Style="{StaticResource StyleButtonFind}" />

                    </StackPanel>

                    <Button
                        x:Name="Close"
                        Width="20"
                        Height="20"
                        Content="⨉"
                        Click="ButtonFind_Click"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Top" />

                </DockPanel>

            </Border>

        </ScrollViewer>

        <Border
            BorderBrush="#CCC"
            BorderThickness="0, 1, 1, 0">

            <TextBox
                x:Name="Lines"
                Text="1"
                Padding="20, 10, 20, 10"
                Cursor="Arrow"
                ContextMenu="{x:Null}"
                FontSize="22"
                Focusable="False"
                FontFamily="Consolas"
                BorderThickness="0"
                Background="#F0F0F0"
                HorizontalContentAlignment="Right"
                ScrollViewer.ScrollChanged="Lines_ScrollChanged" />

        </Border>

        <TextBox
            x:Name="TextBox"
            Padding="10"
            UndoLimit="1000"
            MaxLength="1000000"
            DockPanel.Dock="Top"
            BorderThickness="0"
            SelectionOpacity="0.3"
            AcceptsTab="True"
            AcceptsReturn="True"
            FontSize="22"
            FontFamily="Consolas"
            HorizontalScrollBarVisibility="Visible"
            VerticalScrollBarVisibility="Visible"
            TextChanged="TextBox_TextChanged"
            SelectionChanged="TextBox_SelectionChanged"
            ScrollViewer.ScrollChanged="TextBox_ScrollChanged">

            <TextBox.ContextMenu>

                <ContextMenu ItemsPanel="{StaticResource Items}">

                    <MenuItem
                        Header="Копировать"
                        InputGestureText="Ctrl+C"
                        Click="Copy_Click"
                        Style="{StaticResource StyleMenuItem}" />

                    <MenuItem
                        Header="Вставить"
                        InputGestureText="Ctrl+V"
                        Click="Paste_Click"
                        Style="{StaticResource StyleMenuItem}" />

                    <MenuItem
                        Header="Вырезать"
                        InputGestureText="Ctrl+X"
                        Click="Cut_Click"
                        Style="{StaticResource StyleMenuItem}" />

                    <MenuItem
                        Header="Выделить всё"
                        InputGestureText="Ctrl+A"
                        Click="SelectAll_Click"
                        Style="{StaticResource StyleMenuItem}" />

                    <MenuItem
                        Header="Удалить"
                        InputGestureText="Delete"
                        Click="Delete_Click"
                        Style="{StaticResource StyleMenuItem}" />

                    <Separator />

                    <MenuItem
                        Header="Отменить"
                        InputGestureText="Ctrl+Z"
                        Click="Undo_Click"
                        Style="{StaticResource StyleMenuItem}" />

                    <MenuItem
                        Header="Вернуть"
                        InputGestureText="Ctrl+Y"
                        Click="Redo_Click"
                        Style="{StaticResource StyleMenuItem}" />

                </ContextMenu>

            </TextBox.ContextMenu>

        </TextBox>

    </DockPanel>

</Window>